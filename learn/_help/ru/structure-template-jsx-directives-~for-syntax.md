Директива **~for** используется для создания последовательности однотипных HTML-элементов на основе заданного источника данных.

В качестве источника данных могут выступать: массивы, объекты или любые JavaScript-выражения, значения которых можно представить в виде массива или объекта.

В общем случае директива **~for** имеет следующий синтаксис:

```info md_hideicon
**~for="dataSource"**
```

Параметр **dataSource** определяет источник данных для директивы.

Например,

```javascript _run_edit_[my-component.js]
ODA({
    is: 'my-component',
    template: `
        <div ~for="['A', 'B', 'C']">Очередной элемент div</div>
    `
});
```

В этом примере директива находится в элементе **div** и использует источник данных, содержащий три значения, поэтому в результате работы директивы было создано три элемента **div**.

В процессе работы директива создает объект **$for**, через свойства которого можно получить доступ к текущему элементу источника данных и его параметрам.

```javascript _run_edit_[my-component.js]
ODA({
    is: 'my-component',
    template: `
        <div ~for="1">Свойства $for: {{Object.keys($for)}}</div>
    `
});
```

Из примера видно, что объект **$for** имеет четыре свойства **item**, **index**, **items** и **key**.

1. Свойство **$for.item** содержит значение текущего элемента источника данных.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Элемент: {{$for.item}}</div>
        `,
        array: ['A', 'B', 'C']
    });
    ```

    В этом примере из массива **array** последовательно извлекаются все элементы, и для каждого из них создается свой собственный HTML-элемент **div**. В его теле значение текущего элемента массива выводится с помощью свойства **$for.item**.

1. Свойство **$for.index** содержит индекс текущего элемента источника данных. Нумерация начинается с нуля.

    Если источником данных является массив, то эта переменная будет являться индексом текущего элемента массива.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Элемент[{{$for.index}}]: {{$for.item}}</div>
        `,
        array: ['A', 'B', 'C']
    });
    ```

    Из этого примера видно, что индексация элементов массива, как обычно, начинается с нуля.

1. Свойство **$for.key** содержит название текущего свойства объекта, если источником данных является объект.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="object">{{$for.index}}-е свойство {{$for.key}}: {{$for.item}}</div>
        `,
        object: {
            prop1:'A', prop2:'B', prop3:'C'
        }
    });
    ```

    Параметр **$for.index** в этом примере выводит порядковый номер свойства объекта, а параметр **$for.key** содержит имя этого свойства.

    Если источником данных является массив, то свойство **$for.key** будет выводить такое же значение, что и свойство **$for.index**, т.е. фактически эти два свойства будут дублировать друг друга.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Элемент: {{$for.item}} $for.index: {{$for.index}} = $for.key: {{$for.key}}</div>
        `,
        array: ['A', 'B', 'C']
    });
    ```

    Как видно из этого примера, значения свойств **$for.key** и **$for.index** абсолютно одинаковые.

1. Свойство **$for.items** указывает на сам источник данных, на основе которого формируются все однотипные HTML-элементы.

    Если источником данных является объект или массив, то свойство **$for.items** будет просто ссылаться на них.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Array: [{{$for.items}}]</div>
        `,
        array: ['A', 'B', 'C']
    });
    ```

    Если источником данных будет JavaScript-выражение, то свойство **$for.items** будет ссылаться на внутренний источник данных, который будет сформирован из этого выражения.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="new Array('A','B','C')">Array: [{{$for.items}}]</div>
        `
    });
    ```

    Этот пример аналогичен предыдущему, за исключением того, что источник данных формируется с помощью отдельного JavaScript-выражения.

```info _md_hideicon
HTML-элементы с директивами **~for** можно вкладывать друг в друга, создавая многомерные повторяющиеся конструкции.
```

Например,

```javascript _run_edit_[my-component.js]
ODA({
    is: 'my-component',
    template: `
        <div ~for="object">
            <div ~for="$for.item">{{$for.key}}[{{$$for.index}}]: {{$$for.item}}</div>
        </div>
    `,
    object: {
        array_1: ['A', 'B', 'C'],
        array_2: ['D', 'E', 'F']
    }
});
```

В этом примере директива **~for** во внешнем элементе **div** поочередно выбирает все свойства объекта **object**. Эти свойства являются одномерными массивами и служат исходными данными для директивы **~for** вложенного элемента **div**. Они передаются ему в параметре **$for.item** из внешнего цикла. В результате чего вложенная директива **~for** получает возможность разобрать переданные массивы на отдельные элементы и для каждого из них создать отдельный HTML-элемент **div**.

```info _md_hideicon
Директивой **~for** каждого уровня вложенности создается специальный объект с параметрами цикла. Базой для формирования имени объекта является слово **for**. Для обеспечения уникальности имен каждый уровень добавляет к началу этого слова префикс из символов **’$’** (символ доллара). Количество символов **’$’** в префиксе определяется уровнем вложенности цикла. Для самого верхнего цикла объект имеет имя **$for**. Параметры цикла второго уровня вложенности находятся в объекте с именем **$$for**, третьего – с именем **$$$for** и так далее.
```

Например,

```javascript _run_edit_[my-component.js]
ODA({
    is: 'my-component',
    template: `
        <div ~for="array">
            <div ~for="$for.item">
                <div ~for="$$for.item">Элемент[{{$for.index}},{{$$for.index}},{{$$$for.index}}]: {{$$$for.item}}</div>
            </div>
        </div>
    `,
    array: [
        [['a000', 'a001'], ['a010', 'a011']],
        [['a100', 'a101'], ['a110', 'a111']],
        [['a200', 'a201'], ['a210', 'a211']]
    ]
});
```

В этом примере показано одновременное использование параметра **index** от трех циклов в одном HTML-элементе **div**. Обратите внимание на зависимость количества символов **’$’** в префиксе имени объекта **for** от вложенности цикла.

<div style="position:relative;padding-bottom:48%; margin:10px">
    <iframe src="https://www.youtube.com/embed/uCHBEqfvaGg?start=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
    	style="position:absolute;width:100%;height:100%;"></iframe>
</div>
